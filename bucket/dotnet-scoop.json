{
    "version": "10.0.101",
    "description": "Microsoft .NET Framework 10.0.100 Developer Pack",
    "homepage": "https://dotnet.microsoft.com/zh-cn/",
    "license": "MIT",
    "notes": "This installation will change the default directory of dotnet",
    "architecture": {
        "64bit": {
            "url": "https://builds.dotnet.microsoft.com/dotnet/Sdk/10.0.101/dotnet-sdk-10.0.101-win-x64.zip",
            "hash": "sha512:efcb2bfde6ae691cee94abaabd902562d4463b26c2ae58c3db4291719220843bbc89e32ff16bf95d54efd145423207255464d16616d760a3bf0e6b5ba48214a3"
        }
    },
    "env_add_path": ".",
    "env_set": {
        "DOTNET_ROOT": "$dir",
        "MSBuildSDKsPath": "$dir\\sdk\\$version\\Sdks"
    },
    "pre_install": [
        "$reg_install_path = \"HKLM:SOFTWARE\\dotnet\\Setup\\InstalledVersions\\x64\"",
        "if (!(Test-Path \"$reg_install_path\")) {",
        "   New-Item -Path \"$reg_install_path\" -Type Directory -Force | Out-Null",
        "}",
        "New-ItemProperty -Path \"$reg_install_path\" -Name \"InstallLocation\" -Value %DOTNET_ROOT% -Force | Out-Null",
        "New-ItemProperty -Path \"$reg_install_path\\sharedhost\" -Name \"Version\" -Value $version -Force | Out-Null",
        "New-ItemProperty -Path \"$reg_install_path\\sharedhost\" -Name \"Path\" -Value %DOTNET_ROOT% -Force | Out-Null"
    ],
    "post_install": [
        "$runtimepath = \"$env:ProgramFiles\\dotnet\\shared\"",
        "if (Test-Path $runtimepath) {",
        "    $testlink = (Get-Item $runtimepath).LinkType",
        "    if ($testlink -ne 'Junction') {",
        "       Get-ChildItem -Path $runtimepath | Move-Item -Destination \"$persist_dir\\shared\" -Force",
        "       Remove-Item $runtimepath -force",
        "       New-Item -ItemType Junction -Path $runtimepath -Target \"$persist_dir\\shared\" -Force | Out-Null",
        "    }",
        "} else {",
        "    New-Item -ItemType Junction -Path $runtimepath -Target \"$persist_dir\\shared\" -Force | Out-Null",
        "}",
        "$sdkpath = \"$env:ProgramFiles\\dotnet\\sdk\"",
        "if (Test-Path $sdkpath) {",
        "    $testlink = (Get-Item $sdkpath).LinkType",
        "    if ($testlink -ne 'Junction') {",
        "       Get-ChildItem -Path $sdkpath | Move-Item -Destination \"$persist_dir\\sdk\" -Force",
        "       Remove-Item $sdkpath -force",
        "       New-Item -ItemType Junction -Path $sdkpath -Target \"$persist_dir\\sdk\" -Force | Out-Null",
        "    }",
        "} else {",
        "    New-Item -ItemType Junction -Path $sdkpath -Target \"$persist_dir\\sdk\" -Force | Out-Null",
        "}"
    ],
    "pre_uninstall": "info 'If the uninstall fails with a message saying that access is denied, you may need to log out of your current account, log back in and try again.'",
    "post_uninstall": "Remove-ItemProperty -Path \"HKLM:SOFTWARE\\dotnet\\Setup\\InstalledVersions\\x64\" -Name \"InstallLocation\" -Force | Out-Null",
    "persist": [
        "sdk",
        "shared"
    ],
    "checkver": {
        "url": "https://builds.dotnet.microsoft.com/dotnet/release-metadata/releases-index.json",
        "jsonpath": "$..releases-index[?(@.support-phase == 'active')].latest-sdk",
        "regex": "([\\d.]+)"
    },
    "autoupdate": {
        "architecture": {
            "64bit": {
                "url": "https://builds.dotnet.microsoft.com/dotnet/Sdk/$version/dotnet-sdk-$version-win-x64.zip"
            }
        },
        "hash": {
            "url": "https://builds.dotnet.microsoft.com/dotnet/release-metadata/$majorVersion.$minorVersion/releases.json",
            "regex": "(?s)$basename.*?$sha512"
        }
    }
}
